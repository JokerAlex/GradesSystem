<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/button.css">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<div class="container" style="height:600px">
<div class="row">
<div class=col-md-3><button id="btn1" class="button" style="border-radius:10%;height:50px;width:70%">新建查询</button></div>
<div class=col-md-3><button id="btn2" class="button" style="border-radius:10%;height:50px;width:70%">查询列表</button></div>
<div class=col-md-3><button id="btn3" class="button" style="border-radius:10%;height:50px;width:70%">个人信息</button></div>
<div class=col-md-3><button id="btn4" class="button" style="border-radius:10%;height:50px;width:70%">发布列表</button></div>
<div ><span id="welcomespan" style="float: right;color:grey;font-size:17px">welcome xxx</span></div>
</div>
<!--登陆框框-->

  <div style="overflow:hidden;margin:0 auto;margin-top:5%; width:50%; height:100%; background-color: #FAFAFA;border-radius:5%;opacity: 0.9">
    <form id="uploadForm" method="post" action="/GradesSystem/upload.do" enctype="multipart/form-data">
      <div class="form-group" style="margin:0 auto; margin-top:20%; width:80%">
        <center><h1>新建查询</h1></center>
        <hr style="width:300px;height:1px;border:none;border-top:1px solid #d6d6d6;"/>
        <input type="text" class="form-control" id="listname" name="tableName" placeholder="设置名称如第一学期期末成绩" onblur="checklistname()">
        <span id="listnamestatus" style="float: right; display: none">test</span>
        <br>
        <label for="exampleInputFile">File input</label>
        <input type="file" id="file" name="uploadFile">
      </div>
      <br>
      <center><button type="submit" class="btn btn-default" id="sub" style="width:80%">Submit</button></center>
    </form>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    //GET username
  });
  var testgetusernmae = 2;
  $("#welcomespan").mouseenter(function(){
    $(this).html("log out?");
  });
  $("#welcomespan").mouseleave(function(){
    $(this).html("welcome&nbsp&nbsp"+testgetusernmae+"!");
  });
  $("#welcomespan").click(function(){
    window.location.href="login.html";
  });


  function checklistname(){

      $.ajax({
          type : "post",
          url : "/GradesSystem/checkTableName" ,
          async : true,
          data: JSON.stringify({
              tableName:$("#listname").val(),
        }),
              contentType: "application/json;charset=utf-8",
          dataType: "json",
          success: function (data) {
          var json = eval(data);
          var isavailable = json.isavailable;
          $("#listnamestatus").css("display","");
          $("#listnamestatus").html(isavailable);
          },
      error:function (data) {
      }
  });

  var listname = $("#listname").val();
  var fileinput= $("#listfile").val();
  if(listname!="" && fileinput!="")$("#sub").attr("disabled",false);
  console.log(listname+fileinput);
  }
  function checktablenull(){
      var listname = $("#listname").val();
      var fileinput= $("#listfile").val();
      if(listname!="" && fileinput!="")$("#sub").attr("disabled",false);
  }

  $(document).ready(function(){
      $("#sub").attr("disabled",true);
      $("#listfile").on("change",function(){
          checktablenull();
      });
  });
//导航栏
$(document).ready(function(){
    $(".button:lt(4)").mouseenter(function(){
      $(this).css("height","300px")
    });
    $(".button:lt(4)").mouseleave(function(){
      $(".button:lt(4)").css("height","50px")
    });
    
    $("#btn1").click(function(){
      window.location.href="new_search.html"
    });
    $("#btn2").click(function(){
      window.location.href="QueryListPtea.html"
    });
    $("#btn3").click(function(){
      window.location.href="personal_info.html"
    });
    $("#btn4").click(function(){
      window.location.href="history.html"
    });
  });
</script>
</body>
</html>